<ion-view view-title="Match Detail" name="matchDetail-view">
  <div ng-show="isLogined()" class="float-button" style="top:10%;height: 30px;" ng-click="openPopover($event,vm)">
      <span class="height-fix">
            <a class="content">
                <i class="ion-android-more-vertical"></i>
          </a>
      </span>     
  </div>    
    <ion-content class="has-header" has-bouncing="true">

        <div class="item card-item">
            <div class="card stable-bg ink ink-dark">
                <div class="item item-avatar">
                    <img ng-src='{{vm.info.avatar.url || "img/avatar/blank.png"}}'>
                    <h2>{{vm.info.writter}}</h2>
                    <p ng-show="!vm.isEditMode">"{{vm.info.title}}"</p>
                    <div ng-show="vm.isEditMode"> 
                        <input class="item-input-wrapper full-image" type="text" ng-model="vm.edit.title" placeholder="Write a title.">
                    </div>
                </div>
                <div class="item item-text-wrap" style="padding-top:0" >
                    <div class="row">
                        <div class="col col-50">
                            <img style="width:100%" ng-src='{{vm.info.imgPath1 || "img/ImageLoading.png"}}'>
                            <a class="item stable-bg assertive" ng-click="vm.toggleLikes('1',vm.info.key)" style="padding: 15px 0 5px 0; font-size: 20px;text-align: center;">
                                <i class="icon ion-heart"></i>
                                <span>{{vm.info.i1.likeCount||0}}</span>
                            </a>
                        </div>
                        <div class="col col-50">
                            <img style="width:100%" ng-src='{{vm.info.imgPath2 || "img/ImageLoading.png"}}'>
                            <a class="item stable-bg assertive" ng-click="vm.toggleLikes('2',vm.info.key)"style="padding: 15px 0 5px 0; font-size: 20px;text-align: center;">
                                 <i class="icon ion-heart"></i>
                                 <span>{{vm.info.i2.likeCount||0}}</span>
                             </a>
                        </div>
                    </div>                    
                    
                    <div ng-show="!vm.isEditMode">
                    <strong>{{vm.info.caption}}</strong></div>
                    <div ng-show="vm.isEditMode" class="item"> 
                        <input class="item-input-wrapper full-image" type="text" ng-model="vm.edit.caption" placeholder="Write a title.">
                        <div class="item">
                        <button class="button button-small button-full button-positive"
                            ng-click="updateContent(vm.edit)"> Update
                        </button></div>
                    </div>

                    <div class="card-footer text-right">
                        <i class="icon ion-chatbubble positive"></i> {{vm.count_comments()|| 0}}
                        
                        
                        <div class="pull-left">
                            <i class="icon ion-clock"></i> {{vm.info.when}}
                        </div>
                    </div>

                </div>
                <div class="list" style="background-color:lightgrey">
                    <div comment="vm.ConvertComment(citem)" ng-repeat="citem in vm.info.comments"></div>        
                </div>
            </div>
        </div>


    </ion-content>
    <ion-footer-bar class="bar-assertive">
    <form name="commentForm">
      <div class="chat-input">
        <div class="input-area">
          <input type="text" ng-model="vm.info.newComment" placeholder="Type in your comment..." required>
          <button class="send-msg-btn"
            ng-disabled="!commentForm.$valid"
            ng-click="vm.sendComment(vm.info.newComment)"> Submit
          </button>
        </div>
      </div>
    </form>

</ion-footer-bar>  
</ion-view>
